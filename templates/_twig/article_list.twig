{% extends "index.twig" %}

{% block container %}
    <h1>{{ section_title }}</h1>

    <div class="buttonsBar">
        {% include 'component/article_action_bar.twig' with {'permissions': permissions} %}
    </div>

    <table class="tdTitle" cellspacing="5" width="100%">
        <tbody>
        <tr>
            <td width="70px">ID</td>
            <td>Title</td>
            <td width="120px" class="date">Last Update</td>
            <td width="120px" style="text-align:right;">Status</td>
            <td width="20px" class="check"><input type="checkbox" name="select_all" id="selectAll"></td>
        </tr>
        </tbody>
    </table>

    <!-- BEGIN article_row -->
    {%  for item in articles %}
    <table class="articleTable" cellspacing="5" width="100%">
        <tbody>
        <tr>
            <td width="55px" class="id" style="font-size:11px;">
                {% if permissions.ARTICLE_TOOL_EDITOR_ROLE %}
                    <a target="_blank" href="edit?article_id={{ item.article_id }}">{{ item.article_id }}</a>
                {% else %}
                    <a target="_blank" href="{{ item.article_url }}/?debug=1">{{ item.article_id }}</a>
                {% endif %}
            </td>
            <td class="name">
                <a target="_blank" href="{{ item.article_url }}/?debug=1">{{ item.article_title }}</a>
            </td>
            <td width="120px" class="date" style="font-size:11px;">{{ item.date_scanned }}</td>
            <td width="120px" id="{{ item.status|lower }}" class="status" style="font-size:11px;">{{ item.status }}</td>
            <td width="20px" class="check"><label><input type="checkbox" class="article_status" value="{{ item.article_id }}"></label></td>
        </tr>
        </tbody>
    </table>
    {%  endfor %}
    <!-- END article_row -->

    <div class="buttonsBar btm">
        {% include 'component/article_action_bar.twig' with {'permissions': permissions} %}
    </div>

    </div>
{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script>
        const list = document.querySelectorAll('input.article_status[type=checkbox]');
        list.forEach((l) => {l.setAttribute('checked', 'checked')});
    </script>
{% endblock %}



